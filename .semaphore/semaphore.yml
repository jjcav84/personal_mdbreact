version: v1.0
name: building mdbreact personal app
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: Install dependencies
    task:
      jobs:
      - name: yarn
        commands:
          - checkout
          - cache restore node-modules-$(checksum package-lock.json)
          - yarn
          - yarn build  
          - cache store node-modules-$(checksum package-lock.json) node_modules
      - name: build
    task:
      jobs:
      - name: Docker Hub
        commands:
          - checkout
          - docker build -t jcavazos/dockerize-personal-site:latest .
          - docker run jcavazos/dockerize-personal-site:latest




